{"version":3,"sources":["BotApi.js","panels/Home.js","panels/com_constructor/ComList.js","panels/com_constructor/ComItemButton.js","panels/com_constructor/ComItem.js","panels/com_constructor/Text.js","panels/com_constructor/Post.js","panels/com_constructor/Media.js","panels/com_constructor/ComPanel.js","panels/com_constructor/ComConstructor.js","panels/com_constructor/ComEditor.js","App.js","index.js"],"names":["BotApi","url","xhr","XMLHttpRequest","open","encodeURIComponent","send","responseText","body","setRequestHeader","JSON","stringify","id","parse","this","queryGET","queryPOST","queryPUT","queryDELETE","Home","props","state","dbinfo","getUser","userId","user","before","src","photo_200","description","Nick","first_name","last_name","size","level","onClick","go","data-to","React","Component","osName","platform","ComList","openCommand","bind","e","i","currentTarget","dataset","comindex","app","setState","ps","activePanel","command","comArr","getAllCommands","left","IOS","header","mode","hidden","length","map","a","data-comindex","Name","ComItemButton","setItem","cc","item","name","status","disabled","rusName","ComItem","selectItemType","setFieldHidden","changeField","deleteItem","v","target","value","type","n","isNaN","fields","Text","placeholder","text","onChange","Post","owner","number","Media","getIdsMap","addId","deleteId","changeId","checkIdsCount","ids","push","pop","count","idsItems","forEach","album","ComPanel","comName","post","image","video","changeName","validateEmpty","getAlert","validateStatus","validate","deleteCommand","includes","toLowerCase","arr","aa","trim","actions","title","autoclose","onClose","setPopout","error","prepareCommandBody","prepareInt","Number","prepareArray","join","isExist","Id","Author","Type","OwnerId","PostId","Image","AlbumId","Ids","Video","action","to","actionText","style","color","ComConstructor","addCommand","createCommand","ComEditor","split","com","updateCommand","App","obj","bridge","fetchedUser","popout","getParam","fetchData","key","p","window","location","search","match","RegExp","panel","subscribe","detail","data","schemeAttribute","document","createAttribute","scheme","attributes","setNamedItem","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.ac1e98eb.chunk.js","sourcesContent":["class BotApi {\r\n    static queryGET(url) {\r\n        var xhr = new XMLHttpRequest()\r\n        xhr.open('GET', `https://pavlentygood.fvds.ru/query.php?method=GET&url=${encodeURIComponent(url)}`, false)\r\n        xhr.send()\r\n        return xhr.responseText\r\n    }\r\n\r\n    static queryPOST(url, body) {\r\n        var xhr = new XMLHttpRequest()\r\n        xhr.open('POST', `https://pavlentygood.fvds.ru/query.php?method=POST&url=${encodeURIComponent(url)}`, false)\r\n        xhr.setRequestHeader('Content-Type', 'application/json')\r\n        xhr.send(JSON.stringify(body))\r\n        return xhr.responseText\r\n    }\r\n\r\n    static queryPUT(url, body) {\r\n        var xhr = new XMLHttpRequest()\r\n        xhr.open('POST', `https://pavlentygood.fvds.ru/query.php?method=PUT&url=${encodeURIComponent(url)}`, false)\r\n        xhr.setRequestHeader('Content-Type', 'application/json')\r\n        xhr.send(JSON.stringify(body))\r\n        return xhr.responseText\r\n    }\r\n\r\n    static queryDELETE(url) {\r\n        var xhr = new XMLHttpRequest()\r\n        xhr.open('GET', `https://pavlentygood.fvds.ru/query.php?method=DELETE&url=${encodeURIComponent(url)}`, false)\r\n        xhr.setRequestHeader('Content-Type', 'application/json')\r\n        xhr.send()\r\n        return xhr.responseText\r\n    }\r\n\r\n    static getUser(id) {\r\n        return JSON.parse(this.queryGET(`app_info?userId=${id}`))\r\n    }\r\n\r\n    static getAllCommands() {\r\n        return JSON.parse(this.queryGET(`simple_command`))\r\n    }\r\n\r\n    static addCommand(body) {\r\n        this.queryPOST('simple_command', body)\r\n    }\r\n\r\n    static updateCommand(body) {\r\n        this.queryPUT('simple_command', body)\r\n    }\r\n\r\n    static deleteCommand(id) {\r\n        this.queryDELETE(`simple_command?id=${id}`)\r\n    }\r\n}\r\n\r\nexport default BotApi\r\n","import React from 'react'\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel'\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader'\nimport Button from '@vkontakte/vkui/dist/components/Button/Button'\nimport Group from '@vkontakte/vkui/dist/components/Group/Group'\nimport Cell from '@vkontakte/vkui/dist/components/Cell/Cell'\nimport Div from '@vkontakte/vkui/dist/components/Div/Div'\nimport Avatar from '@vkontakte/vkui/dist/components/Avatar/Avatar'\nimport BotApi from '../BotApi'\n\nclass Home extends React.Component {\n\tconstructor(props) {\n\t\tsuper()\n\t\tthis.state = {\n\t\t\tdbinfo: BotApi.getUser(props.userId)\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id}>\n\t\t\t\t{this.props.user &&\n\t\t\t\t\t<Group>\n\t\t\t\t\t\t<PanelHeader>RoyBot</PanelHeader>\n\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\tbefore={<Avatar src={this.props.user.photo_200} />}\n\t\t\t\t\t\t\tdescription={this.state.dbinfo.Nick ?? 'Нет ника'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`${this.props.user.first_name} ${this.props.user.last_name}`}\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t<Button size=\"l\" level=\"2\" onClick={this.props.go} data-to=\"com_list\">Конструктор команд</Button>\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t</Group>}\n\t\t\t</Panel>\n\t\t)\n\t}\n}\n\nexport default Home\n","import React from 'react'\r\nimport { platform, IOS } from '@vkontakte/vkui'\r\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel'\r\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader'\r\nimport PanelHeaderButton from '@vkontakte/vkui/dist/components/PanelHeaderButton/PanelHeaderButton'\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back'\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back'\r\nimport Div from '@vkontakte/vkui/dist/components/Div/Div'\r\nimport Button from '@vkontakte/vkui/dist/components/Button/Button'\r\nimport Group from '@vkontakte/vkui/dist/components/Group/Group'\r\nimport List from '@vkontakte/vkui/dist/components/List/List'\r\nimport Cell from '@vkontakte/vkui/dist/components/Cell/Cell'\r\nimport Header from '@vkontakte/vkui/dist/components/Header/Header'\r\nimport BotApi from '../../BotApi'\r\n\r\nconst osName = platform()\r\n\r\nclass ComList extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.openCommand = this.openCommand.bind(this)\r\n    }\r\n\r\n    openCommand(e) {\r\n        const i = e.currentTarget.dataset.comindex\r\n        this.props.app.setState(ps => {\r\n            ps.activePanel = 'com_editor'\r\n            this.props.app.command = this.props.app.comArr[i]\r\n            return ps\r\n        })\r\n    }\r\n\r\n    render() {\r\n        this.props.app.comArr = BotApi.getAllCommands()\r\n        return (\r\n            <Panel id={this.props.id}>\r\n                <PanelHeader\r\n                    left={<PanelHeaderButton onClick={this.props.go} data-to=\"home\">\r\n                        {osName === IOS ? <Icon28ChevronBack /> : <Icon24Back />}\r\n                    </PanelHeaderButton>}\r\n                >Конструктор команд</PanelHeader>\r\n                <Group>\r\n                    <Div>\r\n                        <Button size=\"l\" onClick={this.props.go} data-to=\"com_constructor\">Создать команду</Button>\r\n                    </Div>\r\n                </Group>\r\n                <Group header={<Header mode=\"secondary\">Список созданных команд</Header>}>\r\n                    <Div>\r\n                        {<h4 hidden={this.props.app.comArr.length > 0}>Пусто</h4>}\r\n                        <List>\r\n                            {this.props.app.comArr.map((a, i) => (<Cell onClick={this.openCommand} data-comindex={i}>{a.Name}</Cell>))}\r\n                        </List>\r\n                    </Div>\r\n                </Group>\r\n            </Panel>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ComList\r\n","import React from 'react'\r\nimport Div from '@vkontakte/vkui/dist/components/Div/Div'\r\nimport Button from '@vkontakte/vkui/dist/components/Button/Button'\r\n\r\nclass ComItemButton extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.setItem = this.setItem.bind(this)\r\n    }\r\n\r\n    setItem() {\r\n        this.props.cc.setState(ps => {\r\n            ps[this.props.item.name].status = !ps[this.props.item.name].status\r\n            return ps\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Div hidden={this.props?.item?.status}>\r\n                <Button\r\n                    size=\"l\"\r\n                    onClick={this.setItem}\r\n                    disabled={this.props.disabled}\r\n                    mode={this.props.item.status ? \"destructive\" : \"commerce\"}\r\n                >\r\n                    {`${this.props.item.status ? 'Убрать' : 'Добавить'} ${this.props.item.rusName}`}\r\n                </Button>\r\n            </Div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ComItemButton\r\n","import React from 'react'\r\nimport Group from '@vkontakte/vkui/dist/components/Group/Group'\r\nimport Header from '@vkontakte/vkui/dist/components/Header/Header'\r\nimport Button from '@vkontakte/vkui/dist/components/Button/Button'\r\n\r\nclass ComItem extends React.Component {\r\n    constructor(props) {\r\n        super()\r\n        this.state = {\r\n            item: props.item\r\n        }\r\n        this.selectItemType = this.selectItemType.bind(this)\r\n        this.setFieldHidden = this.setFieldHidden.bind(this)\r\n        this.changeField = this.changeField.bind(this)\r\n        this.deleteItem = this.deleteItem.bind(this)\r\n    }\r\n\r\n    selectItemType(e) {\r\n        const v = e.target.value\r\n        this.props.cc.setState(ps => {\r\n            this.state.item.type = v.length == 0 ? null : v\r\n            return ps\r\n        })\r\n    }\r\n\r\n    setFieldHidden(type) {\r\n        return !(this.state.item.type == type)\r\n    }\r\n\r\n    changeField(e) {\r\n        const n = e.currentTarget.name\r\n        const v = e.currentTarget.value\r\n        this.props.cc.setState(ps => {\r\n            if (v == '' || n == 'text' || !isNaN(v)) {\r\n                this.state.item[n] = v\r\n            }\r\n            return ps\r\n        })\r\n    }\r\n\r\n    deleteItem() {\r\n        this.props.cc.setState(ps => {\r\n            this.state.item.status = false\r\n            return ps\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Group\r\n                hidden={!this.state.item.status}\r\n                header={<Header mode=\"secondary\">{this.state.item.rusName}\r\n                    <Button size=\"s\" mode=\"destructive\" onClick={this.deleteItem}>Удалить</Button>\r\n                </Header>}>\r\n                {this.fields()}\r\n            </Group>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ComItem\r\n","import React from 'react'\r\nimport { Input } from '@vkontakte/vkui'\r\nimport Div from '@vkontakte/vkui/dist/components/Div/Div'\r\nimport List from '@vkontakte/vkui/dist/components/List/List'\r\nimport TextArea from '@vkontakte/vkui/dist/components/TextArea/TextArea'\r\nimport ComItem from './ComItem'\r\n\r\nclass Text extends ComItem {\r\n    constructor(props) {\r\n        super(props)\r\n    }\r\n\r\n    fields() {\r\n        return (\r\n            <List>\r\n                <Div>\r\n                    <TextArea placeholder=\"Текст команды\" name=\"text\" value={this.state.item.text} onChange={this.changeField} />\r\n                </Div>\r\n            </List>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Text\r\n","import React from 'react'\r\nimport { Input, Select } from '@vkontakte/vkui'\r\nimport Div from '@vkontakte/vkui/dist/components/Div/Div'\r\nimport List from '@vkontakte/vkui/dist/components/List/List'\r\nimport ComItem from './ComItem'\r\n\r\nclass Post extends ComItem {\r\n    constructor(props) {\r\n        super(props)\r\n    }\r\n\r\n    fields() {\r\n        return (\r\n            <List>\r\n                <Div>\r\n                    <Select placeholder=\"Выберите тип\" value={this.state.item.type} onChange={this.selectItemType}>\r\n                        <option value=\"id\">По ID</option>\r\n                        <option value=\"last\">Последний</option>\r\n                        <option value=\"pinned\">Закрепленный</option>\r\n                        <option value=\"number\">По порядковому номеру</option>\r\n                    </Select>\r\n                </Div>\r\n                <Div hidden={this.state.item.type == null}>\r\n                    <Input type=\"text\" placeholder=\"ID владельца\" name=\"owner\" value={this.state.item.owner} onChange={this.changeField} />\r\n                </Div>\r\n                <Div hidden={this.setFieldHidden('id')}>\r\n                    <Input type=\"text\" placeholder=\"ID поста\" name=\"id\" value={this.state.item.id} onChange={this.changeField} />\r\n                </Div>\r\n                <Div hidden={this.setFieldHidden('number')}>\r\n                    <Input type=\"text\" placeholder=\"Порядковый номер\" name=\"number\" value={this.state.item.number} onChange={this.changeField} />\r\n                </Div>\r\n            </List>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Post\r\n","import React from 'react'\r\nimport { Input, Select } from '@vkontakte/vkui'\r\nimport Div from '@vkontakte/vkui/dist/components/Div/Div'\r\nimport Button from '@vkontakte/vkui/dist/components/Button/Button'\r\nimport List from '@vkontakte/vkui/dist/components/List/List'\r\nimport ComItem from './ComItem'\r\n\r\nclass Media extends ComItem {\r\n    constructor(props) {\r\n        super(props)\r\n        this.getIdsMap = this.getIdsMap.bind(this)\r\n        this.addId = this.addId.bind(this)\r\n        this.deleteId = this.deleteId.bind(this)\r\n        this.changeId = this.changeId.bind(this)\r\n        this.checkIdsCount = this.checkIdsCount.bind(this)\r\n    }\r\n\r\n    selectItemType(e) {\r\n        super.selectItemType(e)\r\n        if (e.target.value == 'id' && this.state.item.ids.length == 0) {\r\n            this.addId()\r\n        } else if (this.state.item.ids.length > 0) {\r\n            this.deleteId()\r\n        }\r\n    }\r\n\r\n    changeId(e) {\r\n        const n = e.currentTarget.name\r\n        const v = e.currentTarget.value\r\n        this.props.cc.setState(ps => {\r\n            if (v == '' || !isNaN(v)) {\r\n                this.state.item.ids[n] = v\r\n            }\r\n            return ps\r\n        })\r\n    }\r\n\r\n    getIdsMap() {\r\n        return this.state.item.ids.map((id, i) => (\r\n            <Div hidden={this.setFieldHidden('id')}>\r\n                <Input\r\n                    name={i}\r\n                    value={id}\r\n                    type=\"text\"\r\n                    placeholder=\"ID медиавложения\"\r\n                    value={this.state.item.ids[i]}\r\n                    onChange={this.changeId}\r\n                />\r\n            </Div>\r\n        ))\r\n    }\r\n\r\n    addId(e) {\r\n        this.props.cc.setState(ps => {\r\n            this.state.item.ids.push('')\r\n            return ps\r\n        })\r\n    }\r\n\r\n    deleteId(e) {\r\n        this.props.cc.setState(ps => {\r\n            this.state.item.ids.pop()\r\n            return ps\r\n        })\r\n    }\r\n\r\n    checkIdsCount() {\r\n        var count = 0\r\n        this.props.cc.idsItems.forEach(item => count += item.ids.length)\r\n        return count < 10\r\n    }\r\n\r\n    fields() {\r\n        return (\r\n            <List>\r\n                <Div>\r\n                    <Select placeholder=\"Выберите тип\" value={this.state.item.type} onChange={this.selectItemType}>\r\n                        <option value=\"id\">По ID</option>\r\n                        <option value=\"random\">Случайное</option>\r\n                    </Select>\r\n                </Div>\r\n                <Div hidden={this.state.item.type == null}>\r\n                    <Input type=\"text\" placeholder=\"ID владельца\" name=\"owner\" value={this.state.item.owner} onChange={this.changeField} />\r\n                </Div>\r\n                <Div hidden={this.setFieldHidden('random')}>\r\n                    <Input type=\"text\" placeholder=\"ID альбома\" name=\"album\" value={this.state.item.album} onChange={this.changeField} />\r\n                </Div>\r\n                {this.getIdsMap()}\r\n                <Div hidden={this.setFieldHidden('id')}>\r\n                    <Button size=\"s\" disabled={!this.checkIdsCount()} onClick={this.addId}>Добавить ID</Button>\r\n                    <Button size=\"s\" mode=\"destructive\" disabled={this.state.item.ids.length <= 1} onClick={this.deleteId}>Удалить ID</Button>\r\n                </Div>\r\n            </List>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Media\r\n","import React from 'react'\r\nimport { platform, IOS } from '@vkontakte/vkui'\r\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel'\r\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader'\r\nimport PanelHeaderButton from '@vkontakte/vkui/dist/components/PanelHeaderButton/PanelHeaderButton'\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back'\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back'\r\nimport { FormLayout, FormLayoutGroup, Input } from '@vkontakte/vkui'\r\nimport Div from '@vkontakte/vkui/dist/components/Div/Div'\r\nimport Button from '@vkontakte/vkui/dist/components/Button/Button'\r\nimport Group from '@vkontakte/vkui/dist/components/Group/Group'\r\nimport Alert from '@vkontakte/vkui/dist/components/Alert/Alert'\r\nimport ComItemButton from './ComItemButton'\r\nimport Text from './Text'\r\nimport Post from './Post'\r\nimport Media from './Media'\r\nimport BotApi from '../../BotApi'\r\n\r\nconst osName = platform()\r\n\r\nclass ComPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            id: 0,\r\n            comName: '',\r\n            text: {\r\n                name: 'text',\r\n                rusName: 'текст',\r\n                status: false,\r\n                text: '',\r\n            },\r\n            post: {\r\n                name: 'post',\r\n                rusName: 'пост',\r\n                status: false,\r\n                type: null,\r\n                owner: '',\r\n                id: '',\r\n                number: '',\r\n            },\r\n            image: {\r\n                name: 'image',\r\n                rusName: 'изображение',\r\n                status: false,\r\n                type: null,\r\n                owner: '',\r\n                album: '',\r\n                ids: [],\r\n            },\r\n            video: {\r\n                name: 'video',\r\n                rusName: 'видео',\r\n                status: false,\r\n                type: null,\r\n                owner: '',\r\n                album: '',\r\n                ids: [],\r\n            }\r\n        }\r\n        this.idsItems = [this.state.image, this.state.video]\r\n        this.changeName = this.changeName.bind(this)\r\n        this.validateEmpty = this.validateEmpty.bind(this)\r\n        this.getAlert = this.getAlert.bind(this)\r\n        this.validateStatus = this.validateStatus.bind(this)\r\n        this.validate = this.validate.bind(this)\r\n        this.deleteCommand = this.deleteCommand.bind(this)\r\n    }\r\n\r\n    changeName(e) {\r\n        const v = e.currentTarget.value\r\n        this.setState(ps => {\r\n            if (!v.includes(' ') && !v.includes('\\n')) {\r\n                this.state.comName = v.toLowerCase()\r\n            }\r\n            return ps\r\n        })\r\n    }\r\n\r\n    validateStatus() {\r\n        const arr = [\r\n            this.state.text,\r\n            this.state.post,\r\n            this.state.image,\r\n            this.state.video,\r\n        ]\r\n        for (var a in arr) {\r\n            const aa = arr[a]\r\n            if (aa.status) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    validateEmpty() {\r\n        const arr = []\r\n        if (this.state.text.status) {\r\n            arr.push(this.state.text.text)\r\n        }\r\n        if (this.state.post.status) {\r\n            arr.push(this.state.post.owner);\r\n            switch(this.state.post.type) {\r\n                case 'id': arr.push(this.state.post.id); break;\r\n                case 'number': arr.push(this.state.post.number); break;\r\n            }\r\n        }\r\n        if (this.state.image.status) {\r\n            arr.push(this.state.image.owner);\r\n            if (this.state.image.type === 'id') {\r\n                for (var a in this.state.image.ids) {\r\n                    arr.push(this.state.image.ids[a])\r\n                }\r\n            }\r\n        }\r\n        if (this.state.video.status) {\r\n            arr.push(this.state.video.owner);\r\n            if (this.state.video.type === 'id') {\r\n                for (var a in this.state.video.ids) {\r\n                    arr.push(this.state.video.ids[a])\r\n                }\r\n            }\r\n        }\r\n        for (var a in arr) {\r\n            const aa = arr[a]\r\n            if (aa == null || aa.trim() == '') {\r\n                return false\r\n            }\r\n        }\r\n        return true\r\n    }\r\n\r\n    getAlert(text) {\r\n        return (\r\n            <Alert\r\n                actions={[{\r\n                    title: 'ОК',\r\n                    mode: 'cancel',\r\n                    autoclose: true,\r\n                }]}\r\n                onClose={() => this.props.app.setPopout(null)}\r\n            >\r\n                <p>{text}</p>\r\n            </Alert>\r\n        )\r\n    }\r\n\r\n    validate() {\r\n        const error = text => this.props.app.setPopout(this.getAlert(text))\r\n\r\n        if (this.state.comName == null || this.state.comName.trim() == '') {\r\n            return error('Название команды не может быть пустым!')\r\n        }\r\n        if (!this.validateStatus()) {\r\n            return error('Ответ команды не может быть пустым!')\r\n        }\r\n        if (!this.validateEmpty()) {\r\n            return error('Не все поля заполнены!')\r\n        }\r\n\r\n        this.prepareCommandBody()\r\n    }\r\n\r\n    prepareCommandBody() {\r\n        const prepareInt = a => Number(a ?? 0)\r\n        const prepareArray = a => a.map(id => id ?? 0).join(' ')\r\n        const isExist = a => a.type != null && a.type.length > 0\r\n\r\n        var body = {\r\n            Id: this.state.id,\r\n            Name: this.state.comName,\r\n            Text: this.state.text.status ? this.state.text.text : null,\r\n            Author: {\r\n                Id: prepareInt(this.props.userId)\r\n            },\r\n            Post: isExist(this.state.post) ? {\r\n                Type: this.state.post.type,\r\n                OwnerId: prepareInt(this.state.post.owner),\r\n                PostId: prepareInt(this.state.post.id),\r\n                Number: prepareInt(this.state.post.number),\r\n            } : null,\r\n            Image: isExist(this.state.image) ? {\r\n                Type: this.state.image.type,\r\n                OwnerId: prepareInt(this.state.image.owner),\r\n                AlbumId: prepareInt(this.state.image.album),\r\n                Ids: prepareArray(this.state.image.ids),\r\n            } : null,\r\n            Video: isExist(this.state.video) ? {\r\n                Type: this.state.video.type,\r\n                OwnerId: prepareInt(this.state.video.owner),\r\n                AlbumId: prepareInt(this.state.video.album),\r\n                Ids: prepareArray(this.state.video.ids),\r\n            } : null\r\n        }\r\n\r\n        this.action(body)\r\n    }\r\n\r\n    deleteCommand() {\r\n        BotApi.deleteCommand(this.state.id)\r\n\r\n        this.props.app.go({currentTarget: { dataset: { to: 'com_list'}}})\r\n        this.props.app.setPopout(\r\n            <Alert\r\n                actions={[{\r\n                    title: 'ОК',\r\n                    mode: 'cancel',\r\n                    autoclose: true,\r\n                }]}\r\n                onClose={() => this.props.app.setPopout(null)}\r\n            >\r\n                <p>Команда удалена!</p>\r\n            </Alert>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Panel id={this.props.id}>\r\n                <PanelHeader\r\n                    left={<PanelHeaderButton onClick={this.props.go} data-to=\"com_list\">\r\n                        {osName === IOS ? <Icon28ChevronBack /> : <Icon24Back />}\r\n                    </PanelHeaderButton>}\r\n                >{this.header}</PanelHeader>\r\n                <FormLayout>\r\n                    <FormLayoutGroup>\r\n                        <Group>\r\n                            <Div><Input type=\"text\" placeholder=\"Название команды\" value={this.state.comName} onChange={this.changeName} /></Div>\r\n                        </Group>\r\n                        <Text cc={this} item={this.state.text} />\r\n                        <Post cc={this} item={this.state.post} />\r\n                        <Media cc={this} item={this.state.image} />\r\n                        <Media cc={this} item={this.state.video} />\r\n                    </FormLayoutGroup>\r\n                </FormLayout>\r\n                <Div>\r\n                    <Group>\r\n                        <ComItemButton cc={this} item={this.state.text} />\r\n                        <ComItemButton cc={this} item={this.state.post} />\r\n                        <ComItemButton cc={this} item={this.state.image} />\r\n                        <ComItemButton cc={this} item={this.state.video} />\r\n                    </Group>\r\n                    <Group>\r\n                        <Div>\r\n                            <Button size=\"xl\" onClick={this.validate}>{this.actionText}</Button>\r\n                        </Div>\r\n                    </Group>\r\n                    <Group>\r\n                        <Div>\r\n                            <Button hidden={this.state.id == 0} style={{color: 'red'}} size=\"l\" mode='tertiary' onClick={this.deleteCommand}>Удалить команду</Button>\r\n                        </Div>\r\n                    </Group>\r\n                </Div>\r\n            </Panel>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ComPanel\r\n","import React from 'react'\r\nimport { platform, IOS } from '@vkontakte/vkui'\r\nimport Alert from '@vkontakte/vkui/dist/components/Alert/Alert'\r\nimport BotApi from '../../BotApi'\r\nimport ComPanel from './ComPanel'\r\n\r\nconst osName = platform()\r\n\r\nclass ComConstructor extends ComPanel {\r\n    constructor(props) {\r\n        super(props)\r\n        this.header = 'Создание команды'\r\n        this.actionText = 'Создать команду'\r\n    }\r\n\r\n    createCommand(body) {\r\n        BotApi.addCommand(body)\r\n\r\n        this.props.app.go({currentTarget: { dataset: { to: 'com_list'}}})\r\n        this.props.app.setPopout(\r\n            <Alert\r\n                actions={[{\r\n                    title: 'ОК',\r\n                    mode: 'cancel',\r\n                    autoclose: true,\r\n                }]}\r\n                onClose={() => this.props.app.setPopout(null)}\r\n            >\r\n                <p>Команда создана!</p>\r\n            </Alert>\r\n        )\r\n    }\r\n\r\n    action(body) {\r\n        this.createCommand(body)\r\n    }\r\n}\r\n\r\nexport default ComConstructor\r\n","import React from 'react'\r\nimport { platform, IOS } from '@vkontakte/vkui'\r\nimport Alert from '@vkontakte/vkui/dist/components/Alert/Alert'\r\nimport BotApi from '../../BotApi'\r\nimport ComPanel from './ComPanel'\r\n\r\nclass ComEditor extends ComPanel {\r\n    constructor(props) {\r\n        super(props)\r\n        this.header = 'Просмотр команды'\r\n        this.actionText = 'Сохранить'\r\n\r\n        const prepareInt = a => a == 0 ? '' : a + ''\r\n        const prepareArray = a => a.split(' ')\r\n\r\n        const com = props.app.command\r\n        this.state.comName = com.Name\r\n        this.state.id = com.Id\r\n        if (com.Text != null && com.Text != '') {\r\n            this.state.text.status = true\r\n            this.state.text.text = com.Text\r\n        }\r\n        if (com.Post != null) {\r\n            this.state.post.status = true\r\n            this.state.post.type = com.Post.Type\r\n            this.state.post.owner = prepareInt(com.Post.OwnerId)\r\n            this.state.post.id = prepareInt(com.Post.PostId)\r\n            this.state.post.number = prepareInt(com.Post.Number)\r\n        }\r\n        if (com.Image != null) {\r\n            this.state.image.status = true\r\n            this.state.image.type = com.Image.Type\r\n            this.state.image.owner = prepareInt(com.Image.OwnerId)\r\n            this.state.image.ids = prepareArray(com.Image.Ids)\r\n            this.state.image.album = prepareInt(com.Image.AlbumId)\r\n        }\r\n        if (com.Video != null) {\r\n            this.state.video.status = true\r\n            this.state.video.type = com.Video.Type\r\n            this.state.video.owner = prepareInt(com.Video.OwnerId)\r\n            this.state.video.ids = prepareArray(com.Video.Ids)\r\n            this.state.video.album = prepareInt(com.Video.AlbumId)\r\n        }\r\n    }\r\n\r\n    updateCommand(body) {\r\n        BotApi.updateCommand(body)\r\n\r\n        this.props.app.go({currentTarget: { dataset: { to: 'com_list'}}})\r\n        this.props.app.setPopout(\r\n            <Alert\r\n                actions={[{\r\n                    title: 'ОК',\r\n                    mode: 'cancel',\r\n                    autoclose: true,\r\n                }]}\r\n                onClose={() => this.props.app.setPopout(null)}\r\n            >\r\n                <p>Изменения сохранены!</p>\r\n            </Alert>\r\n        )\r\n    }\r\n\r\n    action(body) {\r\n        this.updateCommand(body)\r\n    }\r\n}\r\n\r\nexport default ComEditor\r\n","import React from 'react'\nimport bridge from '@vkontakte/vk-bridge'\nimport View from '@vkontakte/vkui/dist/components/View/View'\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner'\nimport '@vkontakte/vkui/dist/vkui.css'\nimport Home from './panels/Home'\nimport ComList from './panels/com_constructor/ComList'\nimport ComConstructor from './panels/com_constructor/ComConstructor'\nimport ComEditor from './panels/com_constructor/ComEditor'\n\nclass App extends React.Component {\n\tconstructor() {\n\t\tsuper()\n\t\tthis.state = {\n\t\t\tfetchedUser: null,\n\t\t\tactivePanel: 'home',\n\t\t\tpopout: <ScreenSpinner size='large' />\n\t\t}\n\t\tthis.getParam = this.getParam.bind(this)\n\t\tthis.go = this.go.bind(this)\n\t\tthis.setPopout = this.setPopout.bind(this)\n\n\t\tasync function fetchData(obj) {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo')\n\t\t\tobj.setState(ps => {\n\t\t\t  ps.fetchedUser = user\n\t\t\t  ps.popout = null\n\t\t\t  return ps\n\t\t\t})\n\t\t  }\n\t\t  fetchData(this)\n\t}\n\n\tgetParam(key) {\n\t\tvar p = window.location.search\n\t\tp = p.match(new RegExp(key + '=([^&=]+)'))\n\t\treturn p ? p[1] : false\n\t}\n\n\tgo(e) {\n\t\tconst panel = e.currentTarget.dataset.to\n\t\tthis.setState(ps => {\n\t\t\tps.activePanel = panel\n\t\t\treturn ps\n\t\t})\n\t}\n\n\tsetPopout(popout) {\n\t\tthis.setState(ps => {\n\t\t\tps.popout = popout\n\t\t\treturn ps\n\t\t})\n\t}\n\n\trender() {\n\t\tconst userId = this.getParam('user_id')\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel} popout={this.state.popout}>\n\t\t\t\t<Home id='home' user={this.state.fetchedUser} go={this.go} userId={userId} app={this} />\n\t\t\t\t<ComList id='com_list' go={this.go} userId={userId} app={this} />\n\t\t\t\t<ComConstructor id='com_constructor' go={this.go} userId={userId} app={this} />\n\t\t\t\t<ComEditor id='com_editor' go={this.go} userId={userId} app={this} />\n\t\t\t</View>\n\t\t)\n\t}\n}\n\nexport default App\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nbridge.subscribe(({ detail: { type, data } }) => {\n  if (type === 'VKWebAppUpdateConfig') {\n    const schemeAttribute = document.createAttribute('scheme')\n    schemeAttribute.value = data.scheme ? data.scheme : 'client_light'\n    document.body.attributes.setNamedItem(schemeAttribute)\n  }\n});\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => { }); //runtime download\n}\n"],"sourceRoot":""}